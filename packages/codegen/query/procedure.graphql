mutation CreateProcedure($input: CreateProcedureInput!) {
  createProcedure(input: $input) {
    procedure {
      id
      name
    }
  }
}

mutation UpdateProcedure($updateProcedureId: ID!, $input: UpdateProcedureInput!) {
  updateProcedure(id: $updateProcedureId, input: $input) {
    procedure {
      id
      name
    }
  }
}

fragment ProcedureList on Procedure {
  id
  name
  background
  description
  displayID
  procedureType
  purposeAndScope
  satisfies
  status
  version
  updatedAt
  updatedBy
  createdAt
  createdBy
  tags
}

query GetProceduresList($where: ProcedureWhereInput) {
  procedures(where: $where) {
    edges {
      node {
        ...ProcedureList
      }
    }
  }
}

query SearchProcedures($query: String!) {
  procedureSearch(query: $query) {
    procedures {
      ...ProcedureList
    }
  }
}

query GetAllProcedures($where: ProcedureWhereInput) {
  procedures(where: $where) {
    edges {
      node {
        id
        name
        displayID
      }
    }
  }
}

fragment ProcedureByID on Procedure {
  id
  name
  description
  details
  displayID
  background
  createdAt
  createdBy
  updatedAt
  updatedBy
  tags
  version
  status
  satisfies
  purposeAndScope
  procedureType
  internalPolicies {
    id
    name
  }
}

query GetProcedureDetailsById($procedureId: ID!) {
  procedure(id: $procedureId) {
    ...ProcedureByID
  }
}

mutation DeleteProcedure($deleteProcedureId: ID!) {
  deleteProcedure(id: $deleteProcedureId) {
    deletedID
  }
}
